(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{1177:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/history",function(){return n(283)}])},283:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return D}});var t=n(5893),i=n(8017),o=n(5666),s=n.n(o),c=n(7294),l=n(980),a=n(4860),u=n(8448),d=n(7389),h=n(6729),m=n(6150),f=n(6618),x=n(4115),p=n(1614),j=n(4003),g=n(993),y=n(3346),b=n(4096),v=n(2804),w=n(6064),C=n(8862),O=n(3692),k=n(9521),T=n(155),P=n(2083),S=n(6040),N=n(4855),E=n(3327),_=function(e){var r=e.isChecked,n=e.setIsChecked,i=e.text,o=e.id;return(0,t.jsxs)(h.NI,{display:"flex",alignItems:"center",margin:".5rem .2rem .5rem .2rem",children:[(0,t.jsx)(m.r,{isChecked:r,onChange:function(e){n(e.target.checked)},id:o,size:"lg"}),(0,t.jsx)(f.l,{htmlFor:o,mb:"0",marginLeft:"1rem",fontSize:"1.2em",fontWeight:"bold",children:i})]})},z=n(813);function A(e,r,n,t,i,o,s){try{var c=e[o](s),l=c.value}catch(a){return void n(a)}c.done?r(l):Promise.resolve(l).then(t,i)}function F(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function I(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){F(e,r,n[r])}))}return e}function V(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=[],t=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(t=(s=c.next()).done)&&(n.push(s.value),!r||n.length!==r);t=!0);}catch(l){i=!0,o=l}finally{try{t||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function B(e){return function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var M=function(){var e=V((0,v.FV)(w.Ob),2),r=e[0],n=e[1],o=V((0,v.FV)(w.ZW),2),F=o[0],M=o[1],W=V((0,v.FV)(w.FJ),2),D=W[0],R=W[1],H=V((0,v.FV)(w.AZ),2),q=H[0],Z=H[1],L=V((0,v.FV)(w.s$),2),X=L[0],G=L[1],J=V((0,v.FV)(w.gB),2),U=J[0],K=J[1],$=V((0,v.FV)(w.ZT),2),Q=$[0],Y=$[1],ee=V((0,v.FV)(w.hK),2),re=ee[0],ne=ee[1],te=(0,a.q)(),ie=te.isOpen,oe=te.onOpen,se=te.onClose,ce=(0,l.useToast)();c.useEffect((function(){var e;(e=s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new z.DB("log"),e.next=3,r.openDB();case 3:return e.t0=n,e.next=6,r.getPeriod(X);case 6:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=M,e.next=11,r.count();case 11:e.t3=e.sent,(0,e.t2)(e.t3);case 13:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,i){var o=e.apply(r,n);function s(e){A(o,t,i,s,c,"next",e)}function c(e){A(o,t,i,s,c,"throw",e)}s(void 0)}))})()}),[X]);var le=c.useMemo((function(){return B(r).reverse().map((function(e){var r=new C.E(e);return r.isUseLog()?r.historyTableText(Q,re):{date:"Null",building:0,floor:0,room:"Null",seat:"Null",campus:"Null"}}))}),[r,Q,re]),ae=c.useMemo((function(){return S.h4.map((function(e){return{Header:e.name,accessor:e.id}}))}),[]),ue=(0,k.useTable)({columns:ae,data:le,initialState:{hiddenColumns:(0,O.qr)(S.CA)}},k.useSortBy),de=ue.getTableProps,he=ue.getTableBodyProps,me=ue.headerGroups,fe=ue.rows,xe=ue.prepareRow,pe=ue.setHiddenColumns;c.useEffect((function(){pe((0,O.qr)(D))}),[D]);var je=function(e){return(0,t.jsx)(u.M,{margin:"1rem",children:(0,t.jsx)(d.z,I({borderRadius:"1.5rem",width:"20rem",backgroundColor:(0,P.O)("buttonSecondly"),padding:"1rem .5rem 1rem .5rem"},e,{children:e.children}))})};return c.useEffect((function(){q&&ce({title:"".concat((0,O.PN)(U),"\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f"),status:"success",duration:4e3,isClosable:!0}),Z(!1)}),[q]),(0,t.jsxs)(E.h,{title:"\u5c65\u6b74",children:[(0,t.jsx)(je,{onClick:oe,children:(0,t.jsx)(x.x,{color:(0,P.O)("textPrimary"),children:"\u30d5\u30a3\u30eb\u30bf\u30fc"})}),(0,t.jsx)(N.CopyToClipboard,{onCopy:function(){return Z(!0)},text:(0,O.JT)(r),children:(0,t.jsx)(je,{children:(0,t.jsx)(x.x,{color:(0,P.O)("textPrimary"),children:"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc"})})}),(0,t.jsxs)(p.u_,{isOpen:ie,onClose:se,size:"sm",isCentered:!0,children:[(0,t.jsx)(p.ZA,{}),(0,t.jsxs)(p.hz,{children:[(0,t.jsx)(p.xB,{children:"\u30d5\u30a3\u30eb\u30bf\u30fc"}),(0,t.jsx)(p.ol,{size:"lg"}),(0,t.jsxs)(p.fe,{padding:"1rem 2rem 1rem 2rem",children:[(0,t.jsx)(i.xu,{children:S.h4.map((function(e,r){return(0,t.jsxs)(h.NI,{display:"flex",alignItems:"center",margin:".5rem .2rem .5rem .2rem",children:[(0,t.jsx)(m.r,{isChecked:D[r],onChange:function(e){var n=B(D);n[r]=e.target.checked,R(n)},size:"lg",id:"switch-".concat(r)}),(0,t.jsx)(f.l,{htmlFor:"switch-".concat(r),marginLeft:"1rem",mb:"0",fontSize:"1.2em",fontWeight:"bold",children:e.name})]},r)}))}),(0,t.jsx)(j.i,{colorScheme:(0,P.O)("divider"),borderWidth:"1px"}),(0,t.jsx)(_,{isChecked:Q,setIsChecked:Y,text:"\u77ed\u3044\u65e5\u6642",id:"shortDate"}),(0,t.jsx)(_,{isChecked:re,setIsChecked:ne,text:"\u7279\u6b8a\u306a\u90e8\u5c4b\u540d",id:"uniqueRoom"}),(0,t.jsx)(u.M,{margin:"1rem 0 .5rem 0",children:(0,t.jsxs)(x.x,{fontWeight:"bold",children:["\u8868\u793a\u30ed\u30b0: ",(0,O.PN)(U)," / \u5408\u8a08\u30ed\u30b0\u6570: ",F]})}),(0,t.jsxs)(g.iR,{defaultValue:X,min:1,max:S.zk,step:0,onChange:function(e){K(e)},onChangeEnd:function(e){G(e)},isReadOnly:!1,isDisabled:!1,children:[(0,t.jsxs)(g.Uj,{children:[(0,t.jsx)(i.xu,{position:"relative",right:10}),(0,t.jsx)(g.Ms,{})]}),(0,t.jsx)(g.gs,{boxSize:6})]})]})]})]}),(0,t.jsx)(u.M,{marginTop:"2rem",children:(0,t.jsxs)(y.iA,I({},de(),{display:"block",variant:"striped",colorScheme:"gray",size:"md",overflowX:"scroll",whiteSpace:"nowrap",style:{WebkitOverflowScrolling:"touch"},children:[(0,t.jsx)(y.hr,{children:me.map((function(e){return(0,t.jsx)(y.Tr,I({},e.getHeaderGroupProps(),{children:e.headers.map((function(e){return(0,t.jsx)(y.Th,I({},e.getHeaderProps(e.getSortByToggleProps()),{padding:".5rem .1rem .5rem .1rem",backgroundColor:(0,P.O)("mainSecondly"),color:(0,P.O)("textTertiary"),fontSize:"1.2rem",children:(0,t.jsx)(u.M,{children:(0,t.jsxs)(b.k,{children:[(0,t.jsx)(x.x,{children:e.render("Header")}),(0,t.jsx)(x.x,{children:e.isSorted?e.isSortedDesc?(0,t.jsx)(T.uiN,{}):(0,t.jsx)(T.xW6,{}):null})]})})}))}))}))}))}),(0,t.jsx)(y.p3,I({},he(),{children:fe.map((function(e){return xe(e),(0,t.jsx)(y.Tr,I({},e.getRowProps(),{children:e.cells.map((function(e){return(0,t.jsx)(y.Td,I({},e.getCellProps(),{textAlign:"center",children:e.render("Cell")}))}))}))}))}))]}))})]})},W=n(124),D=function(){return(0,t.jsx)(W.T,{children:(0,t.jsx)(i.xu,{margin:"2.3rem .1rem 1rem .1rem",children:(0,t.jsx)(M,{})})})}}},function(e){e.O(0,[774,260,159,345,324,888,179],(function(){return r=1177,e(e.s=r);var r}));var r=e.O();_N_E=r}]);